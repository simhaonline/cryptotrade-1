@model BNKMVC.Models.WithdrawVm

@{
    ViewBag.Title = "WithDraw";
    Layout = "~/Views/Shared/_UserLayout.cshtml";

}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Make WithDraw</h4>
                <h6 class="card-subtitle"> Provide a bitcoin wallet Id </h6>
                <div class="m-t-30">
                    @using (Html.BeginForm())
                    {
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        <p id="txtError" class="error"></p>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Amount, htmlAttributes: new { @class = "control-label" })

                            @Html.EditorFor(model => model.Amount, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Amount, "", new { @class = "text-danger" })

                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.WalletId, htmlAttributes: new { @class = "control-label" })

                            @Html.EditorFor(model => model.WalletId, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.WalletId, "", new { @class = "text-danger" })

                        </div>
                        @Html.HiddenFor(model => model.AccountId)



                        <div class="form-group">

                            <input type="submit" value="Create" class="btn btn-primary" />

                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
</div>

@Html.Action("WithDraws")
@section css{

    <link href="~/admin/assets/libs/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />

}


@section Scripts {
    <script src="~/admin/assets/libs/sweetalert2/dist/sweetalert2.all.min.js"></script>

    @Scripts.Render("~/bundles/jqueryval")
    @*<script>
            $("form").submit(function (event) {
                event.preventDefault();
                $form = $(this);
                $button = $(this).find("button[type=submit]");

                $.ajax({
                    url: $form.attr("action"),
                    data: $form.serialize(),
                    beforeSend: function () {
                        $button.attr("disabled", "disabled");

                    },
                    beforeSend: function () {
                        $button.removeAttr("disabled");
                    },
                    success: function (response) {
                        if (response.status == 200) {
                            location.href = "/Investor/MaintainceSecuredPayment/" + response.data.maintainceFee;
                            //Swal.fire({
                            //    title: "Success",
                            //    type: "success",
                            //    text: response.message,
                            //    confirmButtonText: 'Cool'
                            //});
                            //setTimeout(function () {
                            //    //if (returnUrl != "") {
                            //    //    location.href = returnUrl;
                            //    //} else {
                            //    location.reload();
                            //    //}

                            //},
                            //    5000);
                        } else {
                            $("#txtError").text (response.message);
                            Swal.fire({
                                title: "Error",
                                type: "error",
                                text: response.message,
                                confirmButtonText: 'Try Again'
                            }); 

                        }
                        console.log(response);
                    }
                });
            });
        </script>*@
}